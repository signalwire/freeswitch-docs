
# FreeSWITCH Softphone 

 

## About

Configuration ideas using PortAudio as a means to exchange audio between FreeSWITCHâ„¢ and the outside world.

Most of the work on this page on the old wiki was prior to March of 2010\. Some configurations and variable names have changed since then.

## FreeSWITCH as a Dedicated Soft Phone 

The following example configuration assumes an extension of 1000, area code of 208, and that `freeswitch.local` domain is pointed to the internal IP of FreeSWITCH.

### Directory

`/conf/directory/default/freeswitch.local`

Setup the gateway.

**Directory Gateway Configuration Example**

```xml
   <include>
     <user id="1000">
       <gateways>
         <gateway name="freeswitch.local">
         	<param name="username" value="1000"/>
         	<param name="password" value="1234"/>
         	<param name="from-user" value=""/>
         	<param name="from-domain" value="freeswitch.local"/>
         	<param name="expire-seconds" value="60"/>
         	<param name="register" value="true"/>
         	<param name="retry_seconds" value="30"/>
         	<param name="extension" value="1000"/>
         	<param name="context" value="default"/>
         </gateway>
       </gateways>
       <params>
         <param name="password" value="1234"/>
       </params>
     </user>
   </include>
```

### Dialplan

`/conf/dialplan/default.xml`

The example below assumes that the gateway is `freeswitch.local` which is the local phone system. In the example below make sure to change 1208 to your area code.

**Dialplan Example** Expand source 

```xml
 <?xml version="1.0" encoding="utf-8"?>
 <include>
   <context name="default">
     <extension name="freeswitch.local">
       <condition field="destination_number" expression="^(\d{4})$">
         <action application="export" data="nolocal:absolute_codec_string=PCMU"/>
         <action application="set" data="effective_caller_id_number=5555551212"/>
         <action application="set" data="effective_caller_id_name=FreeSWITCH"/>
         <action application="bridge" data="sofia/gateway/freeswitch.local/$1"/>
       </condition>
     </extension>
         
     <extension name="freeswitch.local">
       <condition field="destination_number" expression="^(\d{7})$">
         <action application="export" data="nolocal:absolute_codec_string=PCMU"/>
         <action application="set" data="effective_caller_id_number=5555551212"/>
         <action application="set" data="effective_caller_id_name=FreeSWITCH"/>
         <action application="bridge" data="sofia/gateway/freeswitch.local/1208$1"/>
       </condition>
     </extension>
   
     <extension name="freeswitch.local">
       <condition field="destination_number" expression="^(\d{10})$">
         <action application="export" data="nolocal:absolute_codec_string=PCMU"/>
         <action application="set" data="effective_caller_id_number=5555551212"/>
         <action application="set" data="effective_caller_id_name=FreeSWITCH"/>
         <action application="bridge" data="sofia/gateway/freeswitch.local/1$1"/>
       </condition>
     </extension>
   
     <extension name="freeswitch.local">
       <condition field="destination_number" expression="^(\d{11})$">
         <action application="export" data="nolocal:absolute_codec_string=PCMU"/>
         <action application="set" data="effective_caller_id_number=5555551212"/>
         <action application="set" data="effective_caller_id_name=FreeSWITCH"/>
         <action application="bridge" data="sofia/gateway/freeswitch.local/$1"/>
       </condition>
     </extension>
   </context>
 </include>
```

`/conf/directory/default`

Remove all local extensions .xml files or rename them with .noload

### SIP Profiles

`/conf/sip_profiles/outbound.xml`

If FreeSWITCH is behind the same NAT then comment out ext-rtp-ip, and ext-sip-ip. "

**Outbound SIP Profile**

```xml
 <include>
   <context name="public">
 
     <extension name="unloop">
       <condition field="${unroll_loops}" expression="^true$"/>
       <condition field="${sip_looped_call}" expression="^true$">
 	     <action application="deflect" data="${destination_number}"/>
       </condition>
     </extension>
 
   </context>
 </include>
```

### See Also

* [Examples](https://wiki.freeswitch.org/wiki/Examples "Examples")
* Sample [softphone config](http://svn.freeswitch.org/svn/configs/softphone/)


