
# Music on Hold 

 

## About

  
Music on Hold (MOH) is not a central component, and it's dependent on endpoints supporting it.  

Click here to expand Table of Contents

* 1 [Configuration](#configuration)
* 2 [How it works on the telephone](#how-it-works-on-the-telephone)
* 3 [Royalty-free Music Sources](#royalty-free-music-sources)
* 4 [See also](#see-also)

To download the default FreeSWITCH Music on Hold files at all the sample rates (8000, 16000, 32000, 48000) you must run this command inside the FreeSWITCH source directory:

```xml
make cd-moh-install
```

Or just download the files freeswitch-sounds-music-RESOLUTION-VERSION.tar.gz directly [from](http://files.freeswitch.org/).

## Configuration

In conf/vars.xml the default is defined:

```xml
<X-PRE-PROCESS cmd="set" data="hold_music=local_stream://moh"/>
```

which points to sound files defined in conf/autoload\_configs/local\_stream.conf.xml

You can also generate tones for music on hold using the tone\_stream app:

```xml
<X-PRE-PROCESS cmd="set" data="hold_music={loops=-1}tone_stream://v=-30;%(250,0,350);%(250,0,440)"/>
```

which is not very entertaining, but gets the point across.

You may also configure a unique music on hold for each sip profile, which is useful in multi-tenant environments.

## How it works on the telephone

In the case of call waiting on a single line phone connected to an ATA, it works like this:

1. Second incoming call comes in.
2. Phone plays call waiting beep.
3. User hits flash button.
4. ATA sends a SIP INVITE message to FreeSWITCH, and in the SDP it says "sendonly"
5. FreeSWITCH receives the SIP INVITE and plays the hold music (assuming correctly configured).

## Royalty-free Music Sources

* [incompetech Creative Commons](http://incompetech.com/m/c/royalty-free/)
* [Ghostnotes](http://ghostnotes.blogspot.com/)
* [ClassicCat](http://www.classiccat.net/)

## See also

* [Sofia SIP Stack](./Sofia-SIP-Stack/index.mdx#faq) hold-music option
* [Channel variable](../Dialplan/Variables-Archive/x__Channel-Variables_1048892.mdx)) **hold\_music** option


