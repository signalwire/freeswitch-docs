
# Khomp/Settings 

 

Click here to expand Table of Contents

* 1 [\<channels>](#channels)
* 2 [\<groups>](#groups)
* 3 [\<cadences>](#cadences)
* 4 [\<fxs-branches>](#fxs-branches)
* 5 [\<fxs-hotlines>](#fxs-hotlines)
* 6 [\<fxs-options>](#fxs-options)

## \<channels>

Define general settings of all channels of Khomp:

```xml
Sintaxe: <param name="..." value="..."/>
```

* **accountcode**: Sets the default account code to calls in the Endpoint. This option can be any alphanumeric string;
* **dialplan**: Name of the dialplan module in use.
* **auto-fax-adjustment**: Enable ("yes") or disables ("no") the automatic adjustment of the channel (disable the echo canceller and the suppression DTMF) tone to detect FAX (local option) ;
* **auto-gain-control**:Enable ("yes") or disables ("no") the activation of the automatic gain control (AGC) by the Endpoint (local option);
* **context-digital**: Context for incoming connections on digital boards (the default is "khomp-DD-LL", where "DD" will be replaced at the time of connection by the device number, "LL" by the number of the link, "CCC" by channel number and "SSSS" for the device serial number);
* **context-fxo**: Context for incoming connections on FXO cards (the default is "khomp-CC-DD", where "DD" will be replaced at the time of connection by the device number, "CC" by channel number, and "SSSS" by the device serial number);
* **context-fxs**: Context for incoming connections on FXS cards (the default is "khomp-CC-DD", where "DD" will be replaced at the time of connection by the device number, "CC" by channel number, and "SSSS" by the device serial number);
* **context-gsm-call** (or **context-gsm**): Context of entry for GSM boards (the default is "khomp-CC-DD", where "DD" will be replaced at the time of connection by the device number, "CC" by channel number, and "SSSS" by the device serial number);
* **context-gsm-sms**: Context for incoming SMSs (the default is "khomp-sms-CC-DD", where "DD" will be replaced by the number of device, "CC" by channel number and "SSSS" by the device's serial number);
* **context-pr**: Context for incoming connections on boards KPR (default is "khomp-CC-DD", where "DD" will be replaced at the time of connection by the device number, "CC "by channel number);
* **delay-ringback-co**: Sets the delay to enable the generation of call control tone (ringback) by the Endpoint Khomp when there is an ringback indication from signaling and there is no audio being sent by the channel which indicated the situation (local option);
* **delay-ringback-pbx**: Sets the delay to enable the generation of call control tone (ringback) by the Endpoint Khomp when there is an ringback indication, and the audio has no tone (silence) (local option);
* **disconnect-delay**: Sets the time in milliseconds to perform processing a disconnect event, to ignore situations where other equipment performing the double service to overthrow collect calls (local option);
* **drop-collect-call**: Enables/Disables the action of dropping collect calls. If enabled, all collect calls will be dropped no matter what KDropCollectCall is set to (the default value is "no");
* **echo-canceller** (former 'echocanceller): Active ("yes") or disables ("no") echo cancellation automatic Endpoint (local option);
* **flash-to-digits**: Defines the digits to be sent when the FLASH is detected on FXS channels;
* **fxo-send-pre-audio**: When enabled ("yes") releases audio channel before the outgoing call connection boards KFXO (the default value is "yes");
* **fxs-digit-timeout**: Defines the timeout, in seconds, between digits of a FXS board's extension;
* **fxs-global-orig**: Start number for sequencial branch numbering in FXS cards that are not listed in the **\[fxs-branches\]** section (the numbering follows ascending order from board number and physical channel number) (default is "0");
* **fxs-co-dialtone**: Sequences of numbers, separated by commas, which fires a continuous tone (of central office) in FXS branches (eg: "0,99" means that, when you dial "0" or "99", the user will hear a continuous dial tone) (default is empty);
* **fxs-bina**: When enabled ("yes"), calls to FXS lines will send digits corresponding to the source phone identification using BINA DTMF signaling (the default value is "no") (local option);
* **ignore-letter-dtmfs**: Defines if the channel should ignore some uncommon DTMF digits detected by the board (A, B, C and D). However, if you need to pass those digits througth the board, you may need to set this option to 'no' (the default value is "yes");
* **input-volume**: Sets the volume gain for incoming audio (entering the board), from -10 to +10 (local option);
* **kommuter-activation**: Sets whether to activate devices kommuter found in the system will be done automatically ("auto") by the channel, or manually ("manual") by the user through the command "khomp kommuter on/off"
* **kommuter-timeout**: Sets the timeout (in seconds) for initializing the kommuter devices. If this timeout is reached without receiving notification of the channel, the devices will switch back to "off" condition. The minimum value is "0", where the links will always remain switched "on", and the maximum is "255";
* **language**: Set language to Khomp board calls;
* **log-to-console**: Set log messages to be printed on the console;
* **log-to-disk** (old "log"): Set log messages to be saved to disk;
* **out-of-band-DTMF** (former **dtmfsuppression**): Activate ("yes") or disables ("no") the removal and DTMF sending these out-of-band (local option);
* **output-volume**: Define o volume de saída das ligações, varia de -10 a +10 ;
* **pulse-forwarding** (former 'pulsedetection): Active ("yes") or disables ("no") for the detection of pulses and converting them into DTMF (local option);
* **r2-preconnect-wait** (former 'r2preconnectwait): Sets the timeout sending the ringback signaling, protocol R2/MFC to start sending audio silence. Only used when "r2-strict-Behavior" is set to "no" (local option);
* **r2-strict-Behaviour**: Enable ("yes") or disables ("no") the behavior of signaling R2/MFC as the standard sets. The default is "no", and can be changed to "yes" if needed to receive / send data precise signaling protocol (condition B, for example) (local option);
* **suppression-delay** (former **suppressiondelay**): Activate ("yes") or disables ("no") the delay necessary to suppress DTMF. If disabled ("no"), also disables suppression of DTMF (local option);
* **trace**: Set debugging options. Should not be used in production unless absolutely necessary;
* **user-transfer-digits**: Defines a sequence of DTMF digits to initiate the transfer between FreeSWITCH® and another PBX (using user signaling, like QSig or FXO FLASH);

##  \<groups>

Defines the groups to be used in channel allocation.

In this case, the options are used to define names for _strings allocation of channels_. The format follows the standard **\<group name> = \<allocation string>**, where the **allocation string** is the same string used in the bridge application, and **group name** is an arbitrary name chosen by the user.

For example, to define the group pstn as the channels 0 and 5 of the board 0, the following line could be used:

```xml
<param name="pstn" value="b0c0 + b0c5"/>
```

This group, in turn, could be used in the _bridge application_ as **\<action application="bridge" data="Khomp/Gpstn/..."/>**.

You can associate a given input context to a channel group, simply specify a name of context string after the allocation, separated by ':'.

For example, to define the same group **pstn** as channels 0 to 20 of card 0, and defining the incoming context to for channels in this groups to **from-pstn**, one could use the line:

```xml
<param name="pstn" value="b0c0-20:from-pstn"/>
```

This group would be used the same way as before in the _bridge application_, and all the calls coming from these channels would be treated in context **from-pstn**. 

## \<cadences>

Defines settings for the Endpoint cadences.

In this case, the options are names cadences, followed by one or two pairs of numbers - that define the ranges of tone and silence to be used in cadences. For details, please refer to the configuration file for examples. 

## \<fxs-branches>

Defines source numbers for the board KFXS.

In this case, the options are sequences of prefixes of branches and serial numbers of the boards, which define the basic numbers of source addresses, and the numerical order of the boards. The format of the options is:

```xml
<param name="prefixo" value="serial1, serial2, ...."/>
```

For example, if two **KFXS-300 SPX** boards with serial numbers **K0374** and **K2352** must be numbered sequentially, starting from branch 200, you may write:

```xml
<param name="200" value="374, 2352"/>
```

This will define the first branch of board '_K0374_ as number 200, the second as 201, and so one. The first branch from board K2352 will have number 230 (as K0374 has 30 channels), the second will be numbered 231, and so on - until the last channel, numbered 259.

For more details, please refer to the configuration file for other exemples. 

## \<fxs-hotlines>

Sets hotlines for the KFXS based boards

In this case, the options are sequences of branches and sequences of destination numbers, which define branches to be treated as "hotlines" and numbers to be dialed when they are take off hook. For instance:

```xml
<param name="100" value="1234"/>
<param name="200" value="4321"/>
```

In the first line, the branch numbered 100 will call extension 1234 when taken off hook, while in the second one, branch 200 will call number 4321 when taken off hook. 

## \<fxs-options>

Allows you to set specific settings for FXS extension.

In this case, the settings are extension numbers (based on those defined in the **\<fxs-branches>**), and the options and their values.

* context;
* input-volume;
* output-volume;
* calleridnum;
* calleridname;
* language;
* accountcode;
* flash-to-digits.

Each option is separated from each other by a pipe "|" or a slash "/" and defined after the colon ":". Example:

```xml
<param name="200" value="input-volume:1|context:master-branch" />
```

For more information on the syntax and examples, please refer to the configuration file.


