
# NDLB 

 

## About

NDLB: No Device Left behind

Click here to expand Table of Contents

* 1 [NDLB: No Device Left behind](#ndlb-no-device-left-behind)
* 2 [NDLB-connectile-dysfunction](#ndlb-connectile-dysfunction)
* 3 [NDLB-tls-connectile-dysfunction](#ndlb-tls-connectile-dysfunction)
* 4 [NDLB-force-rport](#ndlb-force-rport)
* 5 [NDLB-broken-auth-hash](#ndlb-broken-auth-hash)
* 6 [NDLB-received-in-nat-reg-contact](#ndlb-received-in-nat-reg-contact)
* 7 [NDLB-sendrecv-in-session](#ndlb-sendrecv-in-session)
* 8 [NDLB-allow-bad-iananame](#ndlb-allow-bad-iananame)
* 9 [NDLB-allow-nondup-sdp](#ndlb-allow-nondup-sdp)
* 10 [NDLB-allow-crypto-in-avp](#ndlb-allow-crypto-in-avp)
* 11 [NDLB-expires-in-register-response](#ndlb-expires-in-register-response)

### NDLB: No Device Left behind

List of all NDLB Option

### NDLB-connectile-dysfunction

Rewrites contact IP and port  
Enables 'NATHACK'

\{EXAMPLE}

```xml
<user id="100" mailbox="100">
 <params>
      <param name="password" value="1234"/>
      <param name="vm-password" value="4321"/>
 </params>
    <variables>
       <variable name="sip-force-contact" value="NDLB-connectile-dysfunction"/>
    </variables>
</user>
```

### NDLB-tls-connectile-dysfunction

Rewrites contact port  
Enables 'TLSHACK'

### NDLB-force-rport

This will force FreeSWITCH to send SIP responses to the network port from which they were received. **Use at your own risk!** For more information see [NAT Traversal](../Networking/NAT-Traversal_3375417.mdx#about).

```xml
<param name="NDLB-force-rport" value="true"/>
```

Param that does force-rport behavior only on endpoints we know are safe to do so on ex. Polycom. This is a dirty hack to try to work with certain endpoints behind NAT which does not use the same port when it does nat, when the devices do not support rport, while not breaking devices that acutally use different ports that force-rport will break.

```xml
<param name="NDLB-force-rport" value="safe"/>
```

### NDLB-broken-auth-hash

Used for when phones respond to a challenged ACK with method INVITE in the hash

```xml
<param name="NDLB-broken-auth-hash" value="true"/>
```

### NDLB-received-in-nat-reg-contact

add a ;received="\<ip>:\<port>" to the contact when replying to register for nat handling

```xml
<param name="NDLB-received-in-nat-reg-contact" value="true"/>
```

### NDLB-sendrecv-in-session

By default, "a=sendrecv" is only included in the media portion of the SDP. While this is RFC-compliant, it may break functionality for some SIP devices. To also include "a=sendrecv" in the session portion of the SDP, set this parameter to true.

```xml
<param name="NDLB-sendrecv-in-session" value="true"/>
```

### NDLB-allow-bad-iananame

* Introduced in rev. 15401, this was enabled by default prior to new param.

Will allow codecs to match respective name even if the given string is not correct.

ie: Linksys and Sipura phones will pass G729a by default instead of G729 as codec string therefore not matching.

If you wish to allow bad IANA names to match respective codec string, add the following param to your sip profile.

```xml
<param name="NDLB-allow-bad-iananame" value="true"/>
```

### NDLB-allow-nondup-sdp

* To indicate you want to parse a different SDP in 200-OK from 1XX (previous default) this is a RFC violation; Therefore, FS does not support it by default anymore. Enable this if you want that broken behaviour.

```xml
<param name="NDLB-allow-nondup-sdp" value="true"/>	
```

### NDLB-allow-crypto-in-avp

* To allow crypto in an AVP vs SAVP which is in violation (\[ERR\] a=crypto in RTP/AVP, refer to rfc3711).
* For channel variable, use rtp\_allow\_crypto\_in\_avp.

```xml
<param name="NDLB-allow-crypto-in-avp" value="true"/>
```

### NDLB-expires-in-register-response

* To add Expires header in SIP registration response
* Please refer to [FS-4708](http://jira.freeswitch.org/browse/FS-4708)


