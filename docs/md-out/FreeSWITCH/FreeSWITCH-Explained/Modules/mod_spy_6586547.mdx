
# mod_spy 

 Created by  Italo Rossi, last modified by  Jonatas Oliveira on 2014.10.31

# About

The module implements userspy application which provides persistent eavesdrop on all channels bridged to a certain user using [mod\_dptools: eavesdrop](./mod-dptools/6586529.mdx#--).

Click here to expand Table of Contents

* 1 [Installing](#installing)
* 2 [Dialplan Application](#dialplan-application)
* 3 [Commands](#commands)

## Installing

* Tell FreeSWITCH to compile this module by editing modules.conf in /usr/src/freeswitch/trunk and uncomment:  
```text  
#applications/mod_spy  
```
* Recompile with make ; make install
* Load the modul by uncommenting the following in modules.conf.xml:  
```xml  
<load module="mod_spy"/>  
```
* Restart FreeSWITCH or load the module manually with 'load mod\_spy' command.

## Dialplan Application

* userspy

In the first parameter of the application you can specify the user@domain for spying, and the second (optional) parameter is a uuid just like with [eavesdrop](https://wiki.freeswitch.org/wiki/Misc.%5FDialplan%5FTools%5Feavesdrop "Misc. Dialplan Tools eavesdrop") to spy on an already existing channel for that user. When there is no active channel for the user, the spying channel hear moh until new channel bridged with the user or hangup.

Example:

```xml
<action application="userspy" data="1000@192.168.1.1 ${hash(select/${domain_name}-spymap/1000)}"/>
```

## Commands

* userspy\_show

This command show you the current spyers.

Example:

```text
1000@192.168.1.1 : 54995932-2a7c-11de-af08-93e49196b898

1 total spy
```

[100@192.168.1.1](mailto:100@192.168.1.1) is the user@domain supplied to userspy application, and 54995932-2a7c-11de-af08-93e49196b898 is the uuid of the spyer's channel.

Document generated by Confluence on nov 11, 2022 04:27
