
# Call Camping 

 Created by  Ryan Harris, last modified on 2018.02.09

# About

Call camping, or camp-on, allows setting the the incoming call to wait if the bridge destination is occupied.

Click here to expand Table of Contents

* 1 [Variables](#variables)  
   * 1.1 [campon](#campon)  
   * 1.2 [campon\_announce\_sound](#campon_announce_sound)  
   * 1.3 [campon\_fallback\_context](#campon_fallback_context)  
   * 1.4 [campon\_fallback\_exten](#campon_fallback_exten)  
   * 1.5 [campon\_hold\_music](#campon_hold_music)  
   * 1.6 [campon\_retries](#campon_retries)  
   * 1.7 [campon\_sleep](#campon_sleep)  
   * 1.8 [campon\_stop\_key](#campon_stop_key)  
   * 1.9 [campon\_timeout](#campon_timeout)
* 2 [Examples](#examples)

# Variables

This behavior is controlled by a number of channel variables that need to be set up before calling `bridge` application:

## campon

boolean Controls whether camping is enabled or not.

Default: `false`

**Usage**

```xml
<action application="set" data="campon=true"/>
<action application="bridge" data="sofia/gateway/myprovider/5551231234"/>
```

## campon_announce_sound

string File to play back after the first bridge fails (e.g. to announce what key to press to skip to fallback extension).

Default: `none`

**Usage**

```xml
<action application="set" data="campon=true"/>
<action application="set" data="campon_stop_key=1"/>
<action application="set" data="campon_announce_sound=press_one_to_stop.wav"/>
<action application="bridge" data="sofia/gateway/myprovider/5551231234"/>
```

## campon_fallback_context

string Optional context name where the call is transferred for fallback

## campon_fallback_exten

string Extention number where the call is transferred for fallback

## campon_hold_music

string Optional hold music to play while camping instead of default [hold\_music](../../../Dialplan/Variables-Master-List_16352570.mdx#hold_music).

**Usage**

```xml
<action application="set" data="campon=true"/>
<action application="set" data="campon_hold_music=/data/campmusic/RelaxingCampSounds.wav"/>
<action application="bridge" data="sofia/gateway/myprovider/5551231234"/>
```

## campon_retries

integer Controls how many times the bridge will be retried before falling back.

Default: `100`

**Usage**

```xml
<action application="set" data="campon=true"/>
<action application="set" data="campon_retries=13"/>
<action application="bridge" data="sofia/gateway/myprovider/5551231234"/>
```

## campon_sleep

integer Controls how long to wait before starting a retry.

Default: `10`

**Usage**

```xml
<action application="set" data="campon=true"/>
<action application="set" data="campon_sleep=30"/>
<action application="bridge" data="sofia/gateway/myprovider/5551231234"/>
```

## campon_stop_key

dtmf digit DTMF digit that breaks the campon loop and skips directly to fallback extension

Default: `none`

**Usage**

```xml
<action application="set" data="campon=true"/>
<action application="set" data="campon_stop_key=1"/>
<action application="set" data="campon_announce_sound=press_one_to_stop.wav"/>
<action application="set" data="campon_fallback_exten=1000"/>
<action application="bridge" data="sofia/gateway/myprovider/5551231234"/>
```

## campon_timeout

integer This variable controls how long to attempt each bridge before timing out. It works exactly like [call\_timeout](../../../Dialplan/Variables-Master-List_16352570.mdx#leg_timeout) but only applies to camping.

Default: `10`

**Usage**

```xml
<action application="set" data="campon=true"/>
<action application="set" data="campon_timeout=20"/>
<action application="bridge" data="sofia/gateway/myprovider/5551231234"/>
```

# Examples

```xml
<action application="set" data="campon=true"/>
<action application="set" data="campon_stop_key=1"/>
<action application="set" data="campon_announce_sound=press_one_to_stop.wav"/>
<action application="set" data="campon_fallback_exten=1000"/>
<action application="bridge" data="sofia/gateway/myprovider/5551231234"/>
```

Document generated by Confluence on nov 11, 2022 04:27
