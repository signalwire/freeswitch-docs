
# SIP Message Logging 

 Created by  Jhonny Michel Costa de Ara√∫jo on 2017.01.13

# About

SIP Message Logging

Click here to expand Table of Contents

* 1 [Turning logging on in the FreeSWITCH SIP stack (Sofia)](#turning-logging-on-in-the-freeswitch-sip-stack-sofia)
* 2 [Using a Network Protocol Analyser](#using-a-network-protocol-analyser)
* 3 [Using a Sip or TCP Proxy](#using-a-sip-or-tcp-proxy)

## Turning logging on in the FreeSWITCH SIP stack (Sofia)

The mod\_sofia wiki page discusses how to enable SIP messages logging [Debugging Sofia Sip](https://wiki.freeswitch.org/wiki/Sofia#Debugging%5FSofia-SIP "Sofia").

The easiest way to turn it on is from the Freeswitch console. Type:

```xml
sofia profile internal siptrace on
sofia profile external siptrace on
```

## Using a Network Protocol Analyser

You can use [wireshark](http://www.wireshark.org/) or other network protocol analyser to view/save SIP and RTP. In windows xp it is not always possible to sniff traffic that doesn't leave the network card (e.g. if sip phone and freeswitch are on the same machine).

## Using a Sip or TCP Proxy

You can place a SIP or TCP proxy between sip phone and freeswitch and configure the sip phone to use the proxy as it's outbound proxy. The proxy should be configured to forward to freeswitch.

[Grinder](http://grinder.sourceforge.net/), a java load testing app, can be configured as a [port forwarding TCP proxy](http://grinder.sourceforge.net/g3/tcpproxy.html#port-forwarding-mode). You cam configure it to listen to, say, 5090 and forward to freeswitch on 5060\. The Sip UA should then be configured to use port 5090.

Note, due to the nature of SIP subsequent sip requests (e.g. BYE) won't use the proxy but will pass directly between sip phone and freeswitch unless the proxy is 'record routing'.

Document generated by Confluence on nov 11, 2022 04:29
