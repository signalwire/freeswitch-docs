
# Avaya 

 Created by  Mario G on 2014.04.29

* 1 [Avaya](#avaya)  
   * 1.1 [Avaya 4610SW IP](#avaya-4610sw-ip)  
   * 1.2 [Avaya one-X Deskphone Edition 9630](#avaya-one-x-deskphone-edition-9630)

## Avaya

### Avaya 4610SW IP

October 2010: SIP-Firmware: 2.2.2 This phone works once the SIP firmware has been installed. The only issue I came across was that after some time, the phone would no longer make or receive calls. The problem was that it doesn't like the "Notify: Messages-waiting" messages. Disable these with: `<param name="send-message-query-on-register" value="false"/>`

### Avaya one-X Deskphone Edition 9630

July 2009: SIP-Firmware: 2.4.1

Summary:

* **Registration:** works with SIP over UDP, TCP and TLS
* **Caller Id:** not tested
* **Call in/out:** not tested
* **Call waiting:** not tested
* **Transfer calls:** not tested
* **Park calls:** not tested
* **SRTP** works
* **TLS** works
* **DTMF** not tested

Looking at TLS: Just edit 46xxsettings and enable every option saying something about TLS and SRTP. For SRTP, I enabled "1,2". Also don´t let the certificate be checked. There´s a strange "SIP/2.0 489 Bad Event" at the end. I don´t know what this mean. But speech is coming through.

```xml
Avaya
Avaya 4610SW IP
October 2010: SIP-Firmware: 2.2.2 This phone works once the SIP firmware has been installed. The only issue I came across was that after some time, the phone would no longer make or receive calls. The problem was that it doesn't like the "Notify: Messages-waiting" messages. Disable these with: <param name="send-message-query-on-register" value="false"/>
Avaya one-X Deskphone Edition 9630
July 2009: SIP-Firmware: 2.4.1
Summary:
Registration: works with SIP over UDP, TCP and TLS
Caller Id: not tested
Call in/out: not tested
Call waiting: not tested
Transfer calls: not tested
Park calls: not tested
SRTP works
TLS works
DTMF not tested

Looking at TLS: Just edit 46xxsettings and enable every option saying something about TLS and SRTP. For SRTP, I enabled "1,2". Also don´t let the certificate be checked. There´s a strange "SIP/2.0 489 Bad Event" at the end. I don´t know what this mean. But speech is coming through.
------------------------------------------------------------------------
recv 602 bytes from tls/[217.229.163.167]:64185 at 12:45:51.745007:
------------------------------------------------------------------------
REGISTER sips:10.10.2.110 SIP/2.0
From: sips:1000@10.10.2.110;tag=-5159386d4396-8_F192.168.178.29
To: sips:1000@10.10.2.110
Call-ID: 1_909-5f0974b1386d4ca0_R@192.168.178.29
CSeq: 1 REGISTER
Via: SIP/2.0/TLS 192.168.178.29:5061;branch=z9hG4bK1_90a4615b657386d4ca8_R
Content-Length: 0
Max-Forwards: 70
Contact: <sips:1000@192.168.178.29:5061;avaya-sc-enabled;transport=tls>;q=1;expires=900;reg-id=1;+sip.instance="<urn:uuid:00000000-0000-1000-8000-00040dec6f47>"
Allow: INVITE,CANCEL,BYE,ACK,SUBSCRIBE,NOTIFY,INFO,REFER,UPDATE
User-Agent: Avaya one-X Deskphone
Supported: replaces

------------------------------------------------------------------------
send 682 bytes to tls/[217.229.163.167]:64185 at 12:45:51.774765:
------------------------------------------------------------------------
SIP/2.0 401 Unauthorized
Via: SIP/2.0/TLS 192.168.178.29:5061;branch=z9hG4bK1_90a4615b657386d4ca8_R;received=217.229.163.167;rport=64185
From: sips:1000@10.10.2.110;tag=-5159386d4396-8_F192.168.178.29
To: <sips:1000@10.10.2.110>;tag=UppKgDDyQ5Htj
Call-ID: 1_909-5f0974b1386d4ca0_R@192.168.178.29
CSeq: 1 REGISTER
User-Agent: FreeSWITCH-mod_sofia/1.0.3-exported
Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, PRACK, MESSAGE, SUBSCRIBE, NOTIFY, REFER, UPDATE, REGISTER, INFO, PUBLISH
Supported: timer, precondition, path, replaces
WWW-Authenticate: Digest realm="10.10.2.110", nonce="15f89e68-7919-11de-9d59-cd93c0224397", algorithm=MD5, qop="auth"
Content-Length: 0

------------------------------------------------------------------------
recv 828 bytes from tls/[217.229.163.167]:64185 at 12:45:51.917601:
------------------------------------------------------------------------
REGISTER sips:10.10.2.110 SIP/2.0
From: sips:1000@10.10.2.110;tag=-5159386d4396-8_F192.168.178.29
To: sips:1000@10.10.2.110
Call-ID: 1_909-5f0974b1386d4ca0_R@192.168.178.29
CSeq: 2 REGISTER
Via: SIP/2.0/TLS 192.168.178.29:5061;branch=z9hG4bK1_9194615b657386d4cb6_R
Content-Length: 0
Max-Forwards: 70
Contact: <sips:1000@192.168.178.29:5061;avaya-sc-enabled;transport=tls>;q=1;expires=900;reg-id=1;+sip.instance="<urn:uuid:00000000-0000-1000-8000-00040dec6f47>"
Allow: INVITE,CANCEL,BYE,ACK,SUBSCRIBE,NOTIFY,INFO,REFER,UPDATE
User-Agent: Avaya one-X Deskphone
Supported: replaces
Authorization: Digest username="1000",realm="10.10.2.110",nonce="15f89e68-7919-11de-9d59-cd93c0224397",uri="sips:10.10.2.110",response="d12f1e667616d17679af37305ea6244d",cnonce="0a4f113b",opaque="",qop=auth,nc=00000003

------------------------------------------------------------------------
send 749 bytes to tls/[217.229.163.167]:64185 at 12:45:51.918442:
------------------------------------------------------------------------
SIP/2.0 200 OK
Via: SIP/2.0/TLS 192.168.178.29:5061;branch=z9hG4bK1_9194615b657386d4cb6_R;received=217.229.163.167;rport=64185
From: sips:1000@10.10.2.110;tag=-5159386d4396-8_F192.168.178.29
To: <sips:1000@10.10.2.110>;tag=vZFcj8X1me8ce
Call-ID: 1_909-5f0974b1386d4ca0_R@192.168.178.29
CSeq: 2 REGISTER
Contact: <sips:1000@192.168.178.29:5061;avaya-sc-enabled;transport=tls>;q=1;expires=900;reg-id=1;+sip.instance="<urn:uuid:00000000-0000-1000-8000-00040dec6f47>"
Date: Sat, 25 Jul 2009 12:45:51 GMT
User-Agent: FreeSWITCH-mod_sofia/1.0.3-exported
Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, PRACK, MESSAGE, SUBSCRIBE, NOTIFY, REFER, UPDATE, REGISTER, INFO, PUBLISH
Supported: timer, precondition, path, replaces
Content-Length: 0

------------------------------------------------------------------------
send 923 bytes to tls/[217.229.163.167]:64185 at 12:45:52.011114:
------------------------------------------------------------------------
NOTIFY sips:1000@217.229.163.167:64185;avaya-sc-enabled;transport=tls SIP/2.0
Via: SIP/2.0/TLS 10.10.2.110;branch=z9hG4bKt6pU4cB5X8mQp
Max-Forwards: 70
From: <sip:1000@10.10.2.110>;tag=X884K3e5HQyZS
To: <sip:1000@10.10.2.110>
Call-ID: ed7f6f71-f3bb-122c-bf99-00242129f20e
CSeq: 118144640 NOTIFY
Contact: <sip:mod_sofia@10.10.2.110:5060>
User-Agent: FreeSWITCH-mod_sofia/1.0.3-exported
Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, PRACK, MESSAGE, SUBSCRIBE, NOTIFY, REFER, UPDATE, REGISTER, INFO, PUBLISH
Supported: timer, precondition, path, replaces
Event: message-summary
Allow-Events: talk, presence, dialog, call-info, sla, include-session-description, presence.winfo, message-summary, refer
Subscription-State: terminated;timeout
Content-Type: application/simple-message-summary
Content-Length: 93

Messages-Waiting: yes
Message-Account: sip:1000@10.10.2.110
Voice-Message: 1/0 (0/0)

------------------------------------------------------------------------
recv 540 bytes from tls/[217.229.163.167]:64185 at 12:45:52.599178:
------------------------------------------------------------------------
SUBSCRIBE sips:1000@10.10.2.110 SIP/2.0
From: sips:1000@10.10.2.110;tag=383b386d4397386d4cf7_F192.168.178.29
To: sips:1000@10.10.2.110
Call-ID: 1_95f4a3e5629386d4cff_S@192.168.178.29
CSeq: 1 SUBSCRIBE
Via: SIP/2.0/TLS 192.168.178.29:5061;branch=z9hG4bK1_95f-10a27ec3386d4cfd_S
Content-Length: 0
Max-Forwards: 70
Contact: <sips:1000@192.168.178.29:5061;transport=tls>
Event: avaya-cm-feature-status
Accept: application/avaya-cm-feature-status+xml
Expires: 86400
User-Agent: Avaya one-X Deskphone
Supported: replaces

------------------------------------------------------------------------
send 686 bytes to tls/[217.229.163.167]:64185 at 12:45:52.599339:
------------------------------------------------------------------------
SIP/2.0 489 Bad Event
Via: SIP/2.0/TLS 192.168.178.29:5061;branch=z9hG4bK1_95f-10a27ec3386d4cfd_S;received=217.229.163.167;rport=64185
From: sips:1000@10.10.2.110;tag=383b386d4397386d4cf7_F192.168.178.29
To: <sips:1000@10.10.2.110>;tag=yH2XNyZ8e0mjN
Call-ID: 1_95f4a3e5629386d4cff_S@192.168.178.29
CSeq: 1 SUBSCRIBE
User-Agent: FreeSWITCH-mod_sofia/1.0.3-exported
Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, PRACK, MESSAGE, SUBSCRIBE, NOTIFY, REFER, UPDATE, REGISTER, INFO, PUBLISH
Supported: timer, precondition, path, replaces
Allow-Events: talk, presence, dialog, call-info, sla, include-session-description, presence.winfo, message-summary, refer
Content-Length: 0

------------------------------------------------------------------------
```

Document generated by Confluence on nov 11, 2022 04:28
